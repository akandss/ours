<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Us ü©µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/style.css" />

  <link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

  <!-- Early redirect to prevent flash -->
  <script>
    if (sessionStorage.getItem("access") !== "granted") {
      window.location.href = "login.html";
    }
  </script>
</head>

<body>
  <!-- Wrap all content in a hidden div -->
  <div id="content" style="display: none;">
  <!-- Navigation to other pages -->
    <nav class="top-ribbon" id="topRibbon">
      <a href="#" id="open2025" class="ribbon-link">2025</a>
      <a href="future.html" class="ribbon-link">Future</a>
    </nav>

    <!-- Hero section -->
    <header class="hero">
      <img src="images/homepage.jpg" alt="Us" class="hero-img">
      <div class="hero-info floral-card">
        <p class="hero-tag">for us, for always ü©µ</p>
        <h1 class="hero-title">a little corner of the internet that‚Äôs just ours</h1>
        <p class="hero-text">
          I wanted a cozy place to keep our favorite moments:
          the big trips, the small days, and everything in between.
          No matter where we are or how busy life gets,
          we always have somewhere to come back to that feels like us.
        </p>
        <div class="tulip-strip" data-tooltip="because you like tulips :)"></div>
      </div>
    </header>
  <section class="origin-section">
  <!-- LEFT: calendar card -->
  <div class="origin-card">
    <p class="origin-label">where our journey started ü©µüíõ</p>

    <div class="mini-calendar">
      <div class="mini-cal-header">
        <span class="mini-cal-month">May</span>
        <span class="mini-cal-year">2025</span>
      </div>

      <div class="mini-cal-grid">
        <div class="dow">S</div>
        <div class="dow">M</div>
        <div class="dow">T</div>
        <div class="dow">W</div>
        <div class="dow">T</div>
        <div class="dow">F</div>
        <div class="dow">S</div>

        <!-- Row 1 (May starts on Fri) -->
        <div class="day empty"></div>
        <div class="day empty"></div>
        <div class="day empty"></div>
        <div class="day empty"></div>
        <div class="day empty"></div>
        <div class="day">1</div>
        <div class="day">2</div>

        <!-- Row 2 -->
        <div class="day">3</div>
        <div class="day">4</div>
        <div class="day">5</div>
        <div class="day">6</div>
        <div class="day">7</div>
        <div class="day">8</div>
        <div class="day">9</div>

        <!-- Row 3 -->
        <div class="day">10</div>
        <div class="day">11</div>
        <div class="day">12</div>
        <div class="day">13</div>
        <div class="day">14</div>
        <div class="day">15</div>
        <div class="day">16</div>

        <!-- Row 4 (‚ù§Ô∏è May 17) -->
        <div class="day heart-day">17</div>
        <div class="day">18</div>
        <div class="day">19</div>
        <div class="day">20</div>
        <div class="day">21</div>
        <div class="day">22</div>
        <div class="day">23</div>

        <!-- Row 5 -->
        <div class="day">24</div>
        <div class="day">25</div>
        <div class="day">26</div>
        <div class="day">27</div>
        <div class="day">28</div>
        <div class="day">29</div>
        <div class="day">30</div>

        <!-- Row 6 -->
        <div class="day">31</div>
        <div class="day empty"></div>
        <div class="day empty"></div>
        <div class="day empty"></div>
        <div class="day empty"></div>
        <div class="day empty"></div>
        <div class="day empty"></div>
      </div>
    </div>
  </div>

  <!-- RIGHT: text-only day counter -->
  <div class="days-block">
    <p class="days-label">days of us</p>
    <p class="days-number" id="dayCountNumber">0</p>
    <p class="days-caption" id="dayCountCaption">
      and somehow, it still feels like the beginning ü©µ
    </p>
  </div>
</section>
<!-- Long distance section -->
<section class="distance-section">
  <!-- LEFT: interactive map -->
  <div class="distance-map-card">
    <h2 class="section-title">our two dots on the map</h2>

    <div id="distanceMap" class="leaflet-map"></div>

    <p class="map-caption" id="mapCaption">
      enter our locations to drop the pins üíå
    </p>
  </div>

  <!-- RIGHT: distance calculator -->
  <div class="distance-card">
    <h2 class="section-title">distance between us</h2>
    <p class="distance-intro">
      update our locations and see how many miles are between us right now.
    </p>

    <form id="distanceForm" class="distance-form">
      <div class="field">
        <label for="youAddress">your location</label>
        <input
          id="youAddress"
          type="text"
          placeholder="city, state or address"
        />
      </div>

      <div class="field">
        <label for="themAddress">their location</label>
        <input
          id="themAddress"
          type="text"
          placeholder="city, state or address"
        />
      </div>

      <button type="submit" class="distance-btn">
        drop pins & calculate miles
      </button>
    </form>

    <p class="distance-result" id="distanceResult">
      we‚Äôre currently ‚Ä¶ miles apart.
    </p>
  </div>
</section>
<section class="music-section">
  <!-- LEFT: polaroid blend image -->
  <div class="music-card music-left">
    <h2 class="section-title">our blend match üéß</h2>

    <div class="polaroid taped">
      <img src="images/spotify_blendmatch.JPG" alt="Spotify Blend match" class="blend-img">
      <p class="polaroid-caption">us in music form ü©µ</p>
    </div>
  </div>

  <!-- RIGHT: playlist + top 3 embeds -->
  <div class="music-card music-right">
    <h2 class="section-title">press play</h2>

    <div class="now-playing">
      <span class="np-dot"></span>
      <span class="np-text">Now Playing</span>
    </div>

    <div class="spotify-embed">
      <!-- Replace with your Blend playlist embed src -->
      <iframe
        style="border-radius:16px"
        src="https://open.spotify.com/embed/playlist/37i9dQZF1EJAV4gt82EPWb?utm_source=generator"
        width="100%"
        height="152"
        frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy">
      </iframe>
    </div>

    <div class="top-songs">
      <h3 class="mini-title">our top 3 </h3>

      <!-- Replace each src with your track embed src -->
      <div class="track-embed">
        <p class="track-label">1.</p>
        <iframe
          style="border-radius:16px"
          src="https://open.spotify.com/embed/track/7FIX01fPHk1K71W2gCFRNN?utm_source=generator"
          width="100%"
          height="80"
          frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          loading="lazy">
        </iframe>
      </div>

      <div class="track-embed">
        <p class="track-label">2.</p>
        <iframe
          style="border-radius:16px"
          src="https://open.spotify.com/embed/track/6n7rlO6iSODiYeZ12iDDGP?utm_source=generator"
          width="100%"
          height="80"
          frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          loading="lazy">
        </iframe>
      </div>

      <div class="track-embed">
        <p class="track-label">3.</p>
        <iframe
          style="border-radius:16px"
          src="https://open.spotify.com/embed/track/7im9t8ySe1NAmUI4XzKu3j?utm_source=generator"
          width="100%"
          height="80"
          frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
          loading="lazy">
        </iframe>
      </div>
    </div>
  </div>
</section>

<section class="boujee-card">
  <div class="boujee-inner">
    
    <p class="boujee-pretext">
      we always say we‚Äôre not boujee‚Ä¶
    </p>

    <div class="saks-badge" data-tip="since we both know saks is a boujee store üòâ">
      <span>S</span>
      <span>A</span>
      <span>K</span>
      <span>S</span>
    </div>

    <p class="boujee-subtext">
      but our initials say otherwise ‚ú®
    </p>

    <p class="boujee-note">
      (and maybe‚Ä¶ just a little‚Ä¶ we are)
    </p>

  </div>
</section>
  <!-- 2025 Envelope + Letter Overlay -->
<div id="letterOverlay" class="overlay" aria-hidden="true">
  <div class="overlay-backdrop" id="letterBackdrop"></div>

  <div class="overlay-card" role="dialog" aria-modal="true" aria-label="Letter for Samartha">
    <!-- Envelope view -->
    <div id="envelopeView" class="envelope-view">
      <div class="envelope" id="envelope">
        <div class="env-top"></div>
      
        <!-- Wax seal at flap tip -->
        <div class="wax-seal" id="waxSeal">
          <span>SAKS</span>
        </div>
      
        <div class="env-body">
          <p class="env-to">To: <span>Samartha</span></p>
          <p class="env-sub">click to open</p>
        </div>
      </div>


      <button class="close-x" id="closeLetter" aria-label="Close">√ó</button>
    </div>

    <!-- Letter view -->
    <div id="letterView" class="letter-view hidden">
      <button class="close-x" id="closeLetter2" aria-label="Close">√ó</button>

      <div class="letter-paper">
        <h2 class="letter-title">To my Harvard Boy ‚ù§Ô∏è</h2>

        <div class="letter-text" contenteditable="true">
          <p>As the year comes to an end, I wanted to take a moment to reflect on one of the best years of my life .</p>
          <p>Let‚Äôs start from the beginning.</p>
          <p>Ever since I opened hinge and saw your profile, everything started to feel different. I never expected to meet someone on a dating app, let alone someone as genuine, thoughtful, and special as you. From the very first text to our first facetime call, everything felt effortless, natural in a way that didn‚Äôt drain me, but instead made me "feel alive".</p>
          <p>I still remember when we were trying to find a time to facetime, and you asked what worked best for me because you knew I had just been put on a new project at work. It was such a small detail, but in that moment, I realized you were truly different - you listened, you remembered, and you cared. With just that one question, you made me feel heard.</p>
          <p>Leading up to that first call, you surprised me by checking in, asking about my day, making me smile.  When we finally talked for hours, I didn‚Äôt want the conversation to end and I hoped you felt the same way.</p>
          <p>There were definitely moments where I felt like you deserved someone better than me, because you are truly one of the brightest souls I‚Äôve ever known. Anyone who crosses paths with you is lucky, because you leave a lasting impact on people. You‚Äôre knowledgeable, humble, charismatic, passionate, and constantly striving to grow and do good in this world. I can‚Äôt wait to see everything you achieve, and one day, I‚Äôll be  making my 9am tee time.</p>
          <p>This year, you showed me, in so many quiet, meaningful ways, what it really feels like to have a partner in life. someone who remembers the small things I say, who encourages and believes in my dreams, who celebrates my accomplishments before I do, who brings me food when I forget to eat, who makes time for me even on the busiest days, who goes the extra mile just to spend a little time together, and someone who explains football to me‚Ä¶ even if you‚Äôre sometimes mean and give misleading info (i won‚Äôt forget üòÇ).</p>
          <p>I loved our sundays, cozy relaxing days spent watching football, talking, and, of course your depression naps. The small moments with you became my favorite ones.</p>
          <p>I still can‚Äôt believe how lucky I am to be with you, to grow with you, and to experience this year together. Thanks for all the amazing memories, and here is to another year my love. ü©µüíõ</p>
          
        </div>

        <div class="letter-footer">
          <button id="finishedBtn" class="primary-btn">Finished</button>
        </div>
      </div>
    </div>
  </div>
</div>
  
  </div> <!-- end #content -->

  <!-- Leaflet JS (map library) -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Load auth.js -->
  <script src="js/auth.js"></script>

  <!-- distance map + calculator -->
  <script src="js/distance.js"></script>

  <!-- Show content after access confirmed -->
  <script>
    if (sessionStorage.getItem("access") === "granted") {
      document.getElementById("content").style.display = "block";
    }
  </script>

  <script>
  const ribbon = document.getElementById("topRibbon");

  function updateRibbon() {
    if (window.scrollY > 40) {
      ribbon.style.opacity = "0";
      ribbon.style.transform = "translateX(-50%) translateY(-10px)";
      ribbon.style.pointerEvents = "none";
    } else {
      ribbon.style.opacity = "1";
      ribbon.style.transform = "translateX(-50%) translateY(0)";
      ribbon.style.pointerEvents = "auto";
    }
  }

  updateRibbon();
  window.addEventListener("scroll", updateRibbon);
</script>
<script>
  // Count days since May 17, 2025
  function updateDayCounter() {
    const start = new Date("2025-05-17T00:00:00");
    const today = new Date();

    const startUTC = Date.UTC(start.getFullYear(), start.getMonth(), start.getDate());
    const todayUTC = Date.UTC(today.getFullYear(), today.getMonth(), today.getDate());

    const diffMs = todayUTC - startUTC;
    const diffDays = Math.max(0, Math.floor(diffMs / (1000 * 60 * 60 * 24)));

    const numEl = document.getElementById("dayCountNumber");
    const captionEl = document.getElementById("dayCountCaption");

    if (!numEl || !captionEl) return;

    numEl.textContent = diffDays.toString();

    // ‚≠ê Static caption (will not change over time)
    captionEl.textContent =
      "and somehow, it still feels like the beginning ü©µ";
  }

  document.addEventListener("DOMContentLoaded", updateDayCounter);
</script>

<script>
  const overlay = document.getElementById("letterOverlay");
  const backdrop = document.getElementById("letterBackdrop");
  const open2025 = document.getElementById("open2025");

  const envelopeView = document.getElementById("envelopeView");
  const letterView = document.getElementById("letterView");
  const envelope = document.getElementById("envelope");

  const close1 = document.getElementById("closeLetter");
  const close2 = document.getElementById("closeLetter2");

  const finishedBtn = document.getElementById("finishedBtn");

  function openOverlay() {
    overlay.classList.add("show");
    overlay.setAttribute("aria-hidden", "false");
    envelopeView.classList.remove("hidden");
    letterView.classList.add("hidden");
    envelope.classList.remove("opening");
    document.body.style.overflow = "hidden";
  }

  function closeOverlay() {
    overlay.classList.remove("show");
    overlay.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
  }

  function openLetter() {
    envelope.classList.add("opening");
    // after the flap animation, switch to letter
    setTimeout(() => {
      envelopeView.classList.add("hidden");
      letterView.classList.remove("hidden");
    }, 430);
  }

  open2025.addEventListener("click", (e) => {
    e.preventDefault();
    openOverlay();
  });

  envelope.addEventListener("click", openLetter);

  close1.addEventListener("click", closeOverlay);
  close2.addEventListener("click", closeOverlay);
  backdrop.addEventListener("click", closeOverlay);

  finishedBtn.addEventListener("click", () => {
    window.location.href = "2025.html";
  });

  // ESC to close
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && overlay.classList.contains("show")) closeOverlay();
  });
</script>
</body>
</html>
